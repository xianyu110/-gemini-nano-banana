# ğŸ‰ Gemini API å®Œæ•´ä¿®å¤è¯´æ˜

## ä¿®å¤çš„é—®é¢˜

### é—®é¢˜1: URLæ ¼å¼é”™è¯¯ âŒ â†’ âœ…
- **é”™è¯¯**: `Invalid URL (POST /v1beta/chat/completions)`
- **åŸå› **: ä½¿ç”¨äº†OpenAIçš„APIæ ¼å¼
- **ä¿®å¤**: æ”¹ä¸ºGeminiæ ¼å¼ `/v1beta/models/{model}:generateContent`

### é—®é¢˜2: å“åº”è§£æé”™è¯¯ âŒ â†’ âœ…
- **é”™è¯¯**: `æœªèƒ½ä»å“åº”ä¸­æå–å†…å®¹`
- **åŸå› **: ä»£ç ä½¿ç”¨äº†é”™è¯¯çš„å­—æ®µåï¼ˆsnake_case vs camelCaseï¼‰
- **ä¿®å¤**: 
  - `inline_data` â†’ `inlineData`
  - `mime_type` â†’ `mimeType`

## å…³é”®æ”¹åŠ¨

### 1. è¯·æ±‚æ ¼å¼ä¿®æ­£
```javascript
// âŒ é”™è¯¯çš„ï¼ˆä¸‹åˆ’çº¿å‘½åï¼‰
{
  inline_data: {
    mime_type: 'image/jpeg',
    data: sampleImage
  }
}

// âœ… æ­£ç¡®çš„ï¼ˆé©¼å³°å‘½åï¼‰
{
  inlineData: {
    mimeType: 'image/jpeg',
    data: sampleImage
  }
}
```

### 2. å“åº”è§£æä¿®æ­£
```javascript
// âŒ é”™è¯¯çš„
const imagePart = content.parts.find((part: any) => part.inline_data)
if (imagePart && imagePart.inline_data) {
  const imageUrl = `data:${imagePart.inline_data.mime_type};base64,${imagePart.inline_data.data}`
}

// âœ… æ­£ç¡®çš„
const imagePart = content.parts.find((part: any) => part.inlineData)
if (imagePart && imagePart.inlineData) {
  const imageUrl = `data:${imagePart.inlineData.mimeType};base64,${imagePart.inlineData.data}`
}
```

## æµ‹è¯•éªŒè¯ âœ…

```bash
# æµ‹è¯•ç»“æœ
å“åº”çŠ¶æ€: 200
âœ… æˆåŠŸ!
âœ… æ£€æµ‹åˆ°å›¾ç‰‡å“åº”
å›¾ç‰‡ç±»å‹: image/png
å›¾ç‰‡æ•°æ®é•¿åº¦: 1596360
```

## ä½¿ç”¨è¯´æ˜

### 1. é‡å¯æœåŠ¡å™¨
```bash
# åœæ­¢å½“å‰æœåŠ¡ (Ctrl+C)
# é‡æ–°å¯åŠ¨
npm run dev
```

### 2. è®¿é—®åº”ç”¨
- æ‰“å¼€æµè§ˆå™¨: http://localhost:3000
- è¾“å…¥æè¿°ï¼ˆå¦‚ "a cat"ï¼‰
- ç‚¹å‡»"ç”Ÿæˆå›¾ç‰‡"

### 3. é¢„æœŸç»“æœ
- âœ… ä¸å†å‡ºç°URLé”™è¯¯
- âœ… ä¸å†å‡ºç°å†…å®¹æå–é”™è¯¯
- âœ… æˆåŠŸæ˜¾ç¤ºç”Ÿæˆçš„å›¾ç‰‡

## é‡è¦æç¤º

1. **æ¨¡å‹ç‰¹æ€§**: `gemini-2.5-flash-image-preview` éœ€è¦å›¾ç‰‡è¾“å…¥æ‰èƒ½å·¥ä½œ
2. **APIæ ¼å¼**: Gemini API ä½¿ç”¨é©¼å³°å‘½åï¼ˆcamelCaseï¼‰ï¼Œä¸æ˜¯ä¸‹åˆ’çº¿å‘½åï¼ˆsnake_caseï¼‰
3. **å“åº”å†…å®¹**: APIä¼šè¿”å›base64ç¼–ç çš„PNGå›¾ç‰‡

## ä¿®å¤çš„æ–‡ä»¶
- `/app/api/generate/route.ts` - ä¸»è¦APIè·¯ç”±æ–‡ä»¶

---

**çŠ¶æ€**: âœ… æ‰€æœ‰é—®é¢˜å·²ä¿®å¤ï¼Œåº”ç”¨ç°åœ¨åº”è¯¥èƒ½æ­£å¸¸å·¥ä½œäº†ï¼