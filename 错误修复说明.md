# ğŸ”§ API é”™è¯¯ä¿®å¤è¯´æ˜

## é—®é¢˜åˆ†æ
ä»æˆªå›¾çœ‹åˆ°çš„é”™è¯¯ä¿¡æ¯ï¼š
- **é”™è¯¯**: `Invalid URL (POST /v1beta/chat/completions)`
- **åŸå› **: ä½¿ç”¨äº†é”™è¯¯çš„ API ç«¯ç‚¹æ ¼å¼

## ä¿®å¤å†…å®¹

### 1. API ç«¯ç‚¹æ ¼å¼
âŒ **é”™è¯¯çš„**ï¼ˆOpenAI æ ¼å¼ï¼‰:
```
POST /v1beta/chat/completions
```

âœ… **æ­£ç¡®çš„**ï¼ˆGemini æ ¼å¼ï¼‰:
```
POST /v1beta/models/{model}:generateContent?key={apiKey}
```

### 2. è¯·æ±‚ä½“æ ¼å¼
âŒ **é”™è¯¯çš„**ï¼ˆOpenAI æ ¼å¼ï¼‰:
```json
{
  "model": "gemini-2.5-flash-image-preview",
  "messages": [{
    "role": "user",
    "content": "..."
  }]
}
```

âœ… **æ­£ç¡®çš„**ï¼ˆGemini æ ¼å¼ï¼‰:
```json
{
  "contents": [{
    "role": "user",
    "parts": [
      {"text": "..."},
      {"inline_data": {"mime_type": "image/jpeg", "data": "..."}}
    ]
  }]
}
```

### 3. ä¿®æ”¹çš„æ–‡ä»¶
- `/app/api/generate/route.ts` - æ›´æ–°ä¸ºæ­£ç¡®çš„ Gemini API æ ¼å¼

## é‡è¦æ”¹å˜

1. **æ·»åŠ äº†ç¤ºä¾‹å›¾ç‰‡**: å› ä¸º `gemini-2.5-flash-image-preview` æ¨¡å‹éœ€è¦å›¾ç‰‡è¾“å…¥
2. **æ›´æ–°äº†å“åº”è§£æ**: é€‚é… Gemini çš„å“åº”æ ¼å¼
3. **æ”¯æŒå›¾ç‰‡ç”Ÿæˆ**: å¦‚æœæ¨¡å‹è¿”å›å›¾ç‰‡ï¼Œä¼šæ˜¾ç¤ºä¸º base64 data URL

## æµ‹è¯•æ­¥éª¤

1. **é‡å¯å¼€å‘æœåŠ¡å™¨**:
```bash
# åœæ­¢æœåŠ¡å™¨ (Ctrl+C)
# é‡æ–°å¯åŠ¨
npm run dev
```

2. **è®¿é—®åº”ç”¨**: http://localhost:3000

3. **æµ‹è¯•ç”Ÿæˆ**:
   - è¾“å…¥æè¿°ï¼Œå¦‚ï¼š"ä¸€åªå¯çˆ±çš„çŒ«å’ª"
   - ç‚¹å‡»"ç”Ÿæˆå›¾ç‰‡"æŒ‰é’®
   - åº”è¯¥ä¸å†çœ‹åˆ° URL é”™è¯¯

## é¢„æœŸç»“æœ

- âœ… ä¸å†å‡ºç° "Invalid URL" é”™è¯¯
- âœ… API è¯·æ±‚æˆåŠŸå‘é€åˆ°æ­£ç¡®çš„ç«¯ç‚¹
- âœ… è¿”å›æ–‡æœ¬æè¿°æˆ–å›¾ç‰‡å†…å®¹

## æ³¨æ„äº‹é¡¹

- è¯¥æ¨¡å‹ (`gemini-2.5-flash-image-preview`) éœ€è¦å›¾ç‰‡è¾“å…¥
- æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ª 1x1 åƒç´ çš„ç¤ºä¾‹å›¾ç‰‡æ¥æ»¡è¶³è¿™ä¸ªè¦æ±‚
- å¦‚æœéœ€è¦æ›´å¥½çš„å›¾ç‰‡ç”Ÿæˆæ•ˆæœï¼Œå»ºè®®ä½¿ç”¨ `/mvp` é¡µé¢ä¸Šä¼ çœŸå®å›¾ç‰‡

---

**ä¿®å¤å®Œæˆï¼** ç°åœ¨åº”è¯¥å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚